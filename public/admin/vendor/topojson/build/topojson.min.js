!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.topojson=n.topojson||{})}(this,function(n){"use strict";function t(){}function v(n){if(!n)return t;var r,e,o=n.scale[0],i=n.scale[1],u=n.translate[0],f=n.translate[1];return function(n,t){t||(r=e=0),n[0]=(r+=n[0])*o+u,n[1]=(e+=n[1])*i+f}}function g(n,t){for(var r=0,e=n.length;r<e;){var o=r+e>>>1;n[o]<t?r=1+o:e=o}return r}function r(n,t){var r={type:"Feature",id:t.id,properties:t.properties||{},geometry:o(n,t)};return null==t.id&&delete r.id,r}function o(n,t){function o(n,t){t.length&&t.pop();for(var r,e=c[n<0?~n:n],o=0,i=e.length;o<i;++o)t.push(r=e[o].slice()),f(r,o);n<0&&function(n,t){for(var r,e=n.length,o=e-t;o<--e;)r=n[o],n[o++]=n[e],n[e]=r}(t,i)}function r(n){return n=n.slice(),f(n,0),n}function e(n){for(var t=[],r=0,e=n.length;r<e;++r)o(n[r],t);return t.length<2&&t.push(t[0].slice()),t}function i(n){for(var t=e(n);t.length<4;)t.push(t[0].slice());return t}function u(n){return n.map(i)}var f=v(n.transform),c=n.arcs,a={Point:function(n){return r(n.coordinates)},MultiPoint:function(n){return n.coordinates.map(r)},LineString:function(n){return e(n.arcs)},MultiLineString:function(n){return n.arcs.map(e)},Polygon:function(n){return u(n.arcs)},MultiPolygon:function(n){return n.arcs.map(u)}};return function n(t){var r=t.type;return"GeometryCollection"===r?{type:r,geometries:t.geometries.map(n)}:r in a?{type:r,coordinates:a[r](t)}:null}(t)}function h(c,o){function n(n,t){for(var r in n){var e=n[r];delete t[e.start],delete e.start,delete e.end,e.forEach(function(n){i[n<0?~n:n]=1}),u.push(e)}}var i={},a={},s={},u=[],f=-1;return o.forEach(function(n,t){var r,e=c.arcs[n<0?~n:n];e.length<3&&!e[1][0]&&!e[1][1]&&(r=o[++f],o[f]=n,o[t]=r)}),o.forEach(function(n){var t,r,e=function(n){var t,r=c.arcs[n<0?~n:n],e=r[0];return c.transform?(t=[0,0],r.forEach(function(n){t[0]+=n[0],t[1]+=n[1]})):t=r[r.length-1],n<0?[t,e]:[e,t]}(n),o=e[0],i=e[1];if(t=s[o])if(delete s[t.end],t.push(n),t.end=i,r=a[i]){delete a[r.start];var u=r===t?t:t.concat(r);a[u.start=t.start]=s[u.end=r.end]=u}else a[t.start]=s[t.end]=t;else if(t=a[i])if(delete a[t.start],t.unshift(n),t.start=o,r=s[o]){delete s[r.end];var f=r===t?t:r.concat(t);a[f.start=r.start]=s[f.end=t.end]=f}else a[t.start]=s[t.end]=t;else a[(t=[n]).start=o]=s[t.end=i]=t}),n(s,a),n(a,s),o.forEach(function(n){i[n<0?~n:n]||u.push([n])}),u}function e(n,t,r){function e(n){var t=n<0?~n:n;(c[t]||(c[t]=[])).push({i:n,g:f})}function o(n){n.forEach(e)}function i(n){n.forEach(o)}var u=[];if(1<arguments.length){var f,c=[],a={LineString:o,MultiLineString:i,Polygon:i,MultiPolygon:function(n){n.forEach(i)}};(function n(t){"GeometryCollection"===t.type?t.geometries.forEach(n):t.type in a&&a[(f=t).type](t.arcs)})(t),c.forEach(arguments.length<3?function(n){u.push(n[0].i)}:function(n){r(n[0].g,n[n.length-1].g)&&u.push(n[0].i)})}else for(var s=0,l=n.arcs.length;s<l;++s)u.push(s);return{type:"MultiLineString",arcs:h(n,u)}}function i(n){var t=n[0],r=n[1],e=n[2];return Math.abs((t[0]-e[0])*(r[1]-t[1])-(t[0]-r[0])*(e[1]-t[1]))}function u(f,n){function t(t){t.forEach(function(n){n.forEach(function(n){(a[n=n<0?~n:n]||(a[n]=[])).push(t)})}),r.push(t)}function c(n){return Math.abs(function(n){for(var t,r=-1,e=n.length,o=n[e-1],i=0;++r<e;)t=o,o=n[r],i+=t[0]*o[1]-t[1]*o[0];return i/2}(o(f,{type:"Polygon",arcs:[n]}).coordinates[0]))}var a={},r=[],e=[];return n.forEach(function(n){"Polygon"===n.type?t(n.arcs):"MultiPolygon"===n.type&&n.arcs.forEach(t)}),r.forEach(function(n){if(!n._){var t=[],r=[n];for(n._=1,e.push(t);n=r.pop();)t.push(n),n.forEach(function(n){n.forEach(function(n){a[n<0?~n:n].forEach(function(n){n._||(n._=1,r.push(n))})})})}}),r.forEach(function(n){delete n._}),{type:"MultiPolygon",arcs:e.map(function(n){var t,r=[];if(n.forEach(function(n){n.forEach(function(n){n.forEach(function(n){a[n<0?~n:n].length<2&&r.push(n)})})}),1<(t=(r=h(f,r)).length))for(var e,o,i=1,u=c(r[0]);i<t;++i)(e=c(r[i]))>u&&(o=r[0],r[0]=r[i],r[i]=o,u=e);return r})}}function c(n,t){return n[1][2]-t[1][2]}n.version="1.6.27",n.mesh=function(n){return o(n,e.apply(this,arguments))},n.meshArcs=e,n.merge=function(n){return o(n,u.apply(this,arguments))},n.mergeArcs=u,n.feature=function(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return r(t,n)})}:r(t,n)},n.neighbors=function(n){function r(n,r){n.forEach(function(n){n<0&&(n=~n);var t=o[n];t?t.push(r):o[n]=[r]})}function e(n,t){n.forEach(function(n){r(n,t)})}var o={},t=n.map(function(){return[]}),i={LineString:r,MultiLineString:e,Polygon:e,MultiPolygon:function(n,t){n.forEach(function(n){e(n,t)})}};for(var u in n.forEach(function t(n,r){"GeometryCollection"===n.type?n.geometries.forEach(function(n){t(n,r)}):n.type in i&&i[n.type](n.arcs,r)}),o)for(var f=o[u],c=f.length,a=0;a<c;++a)for(var s=a+1;s<c;++s){var l,h=f[a],p=f[s];(l=t[h])[u=g(l,p)]!==p&&l.splice(u,0,p),(l=t[p])[u=g(l,h)]!==h&&l.splice(u,0,h)}return t},n.presimplify=function(n,a){function s(n){p.remove(n),n[1][2]=a(n),p.push(n)}var l=v(n.transform),h=function(n){if(!n)return t;var o,i,u=n.scale[0],f=n.scale[1],c=n.translate[0],a=n.translate[1];return function(n,t){t||(o=i=0);var r=Math.round((n[0]-c)/u),e=Math.round((n[1]-a)/f);n[0]=r-o,n[1]=e-i,o=r,i=e}}(n.transform),p=function(){function e(n,t){for(;0<t;){var r=(t+1>>1)-1,e=u[r];if(0<=c(n,e))break;u[e._=t]=e,u[n._=t=r]=n}}function o(n,t){for(;;){var r=t+1<<1,e=r-1,o=t,i=u[o];if(e<f&&c(u[e],i)<0&&(i=u[o=e]),r<f&&c(u[r],i)<0&&(i=u[o=r]),o===t)break;u[i._=t]=i,u[n._=t=o]=n}}var n={},u=[],f=0;return n.push=function(n){return e(u[n._=f]=n,f++),f},n.pop=function(){if(!(f<=0)){var n,t=u[0];return 0<--f&&(n=u[f],o(u[n._=0]=n,0)),t}},n.remove=function(n){var t,r=n._;if(u[r]===n)return r!==--f&&(c(t=u[f],n)<0?e:o)(u[t._=r]=t,r),r},n}();return a=a||i,n.arcs.forEach(function(n){var t,r,e,o,i=[],u=0;for(r=0,e=n.length;r<e;++r)o=n[r],l(n[r]=[o[0],o[1],1/0],r);for(r=1,e=n.length-1;r<e;++r)(t=n.slice(r-1,r+2))[1][2]=a(t),i.push(t),p.push(t);for(r=0,e=i.length;r<e;++r)(t=i[r]).previous=i[r-1],t.next=i[r+1];for(;t=p.pop();){var f=t.previous,c=t.next;t[1][2]<u?t[1][2]=u:u=t[1][2],f&&(f.next=c,f[2]=t[2],s(f)),c&&(c.previous=f,c[0]=t[0],s(c))}n.forEach(h)}),n},Object.defineProperty(n,"__esModule",{value:!0})});